(this["webpackJsonpwebsite-project"]=this["webpackJsonpwebsite-project"]||[]).push([[0],{114:function(e,t,a){},115:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(14),i=a.n(s),c=(a(114),a(29)),o=(a(115),a(21)),u=a(23),l=a(97),d=a(96),h=a(93),v=a(7);function b(e){for(var t=[],a=0,n=0;n<e.length;n++)a+=e[n],t[n]=a;return t}var j=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(v.jsx)(h.Line,{data:(e=this.props.data,t=this.props.dates,{labels:t,datasets:[{label:"Total distance (km)",data:b(e),fill:!0,lineTension:0,backgroundColor:"rgba(75,192,192,0.2)",borderColor:"rgba(75,192,192,1)"}]}),options:{maintainAspectRatio:!1}});var e,t}}]),a}(n.Component),f=function(){function e(){Object(o.a)(this,e),this.entries=[],this.it=0}return Object(u.a)(e,[{key:"addDataEntry",value:function(e,t){this.entries.push(new g(e,t))}},{key:"getEarliestDate",value:function(){for(var e=new Date,t=Number(e),a=0;a<this.entries.length;a++){var n=Number(new Date(this.entries[a].date));n<t&&(t=n,e=this.entries[a].date)}return new Date(e)}},{key:"getLatestDate",value:function(){for(var e=new Date,t=Number(e),a=0;a<this.entries.length;a++){var n=Number(new Date(this.entries[a].date));n>t&&(t=n,e=this.entries[a].date)}return new Date(e)}},{key:"getDates",value:function(){for(var e=[],t=this.getEarliestDate(),a=this.getLatestDate(),n=this.getDaysUntil(t,a)+3,r=0;r<n;r++){var s=new Date(t);s.setDate(s.getDate()+r-1);var i=s.toISOString().substring(0,10);e.push(i)}return e}},{key:"getAdditionOnDate",value:function(e){for(var t=0,a=0;a<this.entries.length;a++)this.entries[a].date===e&&(t+=this.entries[a].value);return t}},{key:"getDateLabel",value:function(e){return e}},{key:"getDaysUntil",value:function(e,t){var a=t.getTime()-e.getTime();return Math.ceil(a/864e5)}}]),e}(),g=function e(t,a){Object(o.a)(this,e),this.value=t,this.date=a},m=function(){function e(t){Object(o.a)(this,e),this.date=t,this.values=[]}return Object(u.a)(e,[{key:"add",value:function(e){this.values.push(e)}}]),e}(),O=function(){function e(t){Object(o.a)(this,e),this.name=t,this.userDates=[]}return Object(u.a)(e,[{key:"add",value:function(e,t){var a=this.getDate(e);null===a&&(a=new m(e),this.userDates.push(a)),a.add(t)}},{key:"getDistancesOnDate",value:function(e){var t=this.getDate(e);return null!==t?t.values:[]}},{key:"getDate",value:function(e){for(var t=0;t<this.userDates.length;t++)if(this.userDates[t].date===e)return this.userDates[t];return null}}]),e}(),p=function(){function e(){Object(o.a)(this,e),this.users=[]}return Object(u.a)(e,[{key:"add",value:function(e,t,a){var n=this.getUser(e);null===n&&(n=new O(e),this.users.push(n)),n.add(t,a)}},{key:"getUser",value:function(e){for(var t=0;t<this.users.length;t++)if(this.users[t].name===e)return this.users[t];return null}},{key:"getUserNames",value:function(){for(var e=[],t=0;t<this.users.length;t++)e.push(this.users[t].name);return e}}]),e}(),x=a(73);a(215);x.a.initializeApp({databaseURL:"https://joriswebsitefirebase-default-rtdb.europe-west1.firebasedatabase.app/"});var y=x.a.database(),D=function(){function e(){Object(o.a)(this,e),this.databaseCache=new p}return Object(u.a)(e,[{key:"triggerValueUpdate",value:function(e,t){var a=new p;console.log("updating dataa...."),e.exists()&&e.forEach((function(e){var t=e.key;e.forEach((function(e){for(var n=e.key,r=e.val(),s=0;s<r.length;s++){var i=r[s];a.add(t,n,i)}}))})),this.databaseCache=a,t()}},{key:"init",value:function(e){var t=this;this.callback=e,y.ref("users").on("value",(function(a){t.triggerValueUpdate(a,e)}))}},{key:"add",value:function(e,t,a){console.log("ONLINE- > add"),console.log(e+" "+t+" "+a);var n=y.ref("users/"+e+"/"+t);n.get().then((function(e){var t=[];e.exists()&&(t=e.val()),t.push(a),n.set(t)})).catch((function(e){console.error(e)}))}},{key:"remove",value:function(e,t,a){console.log("ONLINE- > remove");var n=y.ref("users/"+e+"/"+t);n.get().then((function(e){if(e.exists()){var t=e.val();a<t.length&&t.splice(a,1),n.set(t)}})).catch((function(e){console.error(e)}))}},{key:"edit",value:function(e,t,a,n){var r=y.ref("users/"+e+"/"+t);r.get().then((function(e){if(e.exists()){var t=e.val();a<t.length&&(t[a]=n),r.set(t)}})).catch((function(e){console.error(e)}))}},{key:"update",value:function(){this.callback()}}]),e}(),k=a(262),w=a(263),N=a(260),E=a(250),C=a(256),S=Object(E.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},default:{margin:e.spacing(3,0,1,0)},section1:{margin:e.spacing(3,2)},section3:{margin:e.spacing(3,1,1)}}}));function U(e){var t=S();return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsxs)("div",{className:t.section1,children:[Object(v.jsx)("div",{className:t.default,children:Object(v.jsx)(k.a,{children:"Select the active user"})}),Object(v.jsx)(N.a,{style:{width:160},onChange:function(t){e.processUserSelect(t.target.value)},children:e.items.map((function(e,t){return Object(v.jsx)(w.a,{value:e,children:e})}))})]}),Object(v.jsx)(C.a,{variant:"middle"})]})}var I=a(218),A=a(261),L=a(258),W=a(257);var H=function(e){return Object(v.jsxs)("div",{className:"DataInputStyle",children:[Object(v.jsx)(I.a,{color:"textSecondary",variant:"body2",children:"Add entries for the selected date"}),Object(v.jsxs)(W.a,{container:!0,alignItems:"center",children:[Object(v.jsx)(W.a,{item:!0,xs:!0,children:Object(v.jsx)(A.a,{type:"date",defaultValue:e.activeDate,onChange:function(t){e.processDateChange(t.target.value)}})}),Object(v.jsx)(W.a,{item:!0,children:Object(v.jsx)(L.a,{color:"primary",style:{maxWidth:"100px",maxHeight:"30px",minWidth:"100px",minHeight:"30px"},variant:"contained",onClick:e.addEntry,children:"Add"})})]})]})},T=a(259);var R=function(e){var t=Object(n.useState)(e.distance),a=Object(c.a)(t,2),r=a[0],s=a[1];return Object(v.jsx)("div",{className:"DataEntryStyle",children:Object(v.jsxs)(W.a,{container:!0,alignItems:"center",children:[Object(v.jsx)(W.a,{item:!0,xs:!0,children:Object(v.jsx)(A.a,{label:"Distance",InputProps:{endAdornment:Object(v.jsx)(T.a,{position:"start",children:"km"})},value:r,onChange:function(t){s(t.target.value),e.confirmInput(e.index,t.target.value)}})}),Object(v.jsx)(W.a,{item:!0,children:Object(v.jsx)(L.a,{style:{maxWidth:"30px",maxHeight:"30px",minWidth:"30px",minHeight:"30px"},color:"secondary",variant:"contained",onClick:function(t){e.removeEntry(e.index)},children:"X"})})]})})},V=Object(E.a)((function(e){return{root:{width:"100%",maxWidth:500,backgroundColor:e.palette.background.paper},default:{margin:e.spacing(3,0,1,0),backgroundColor:e.palette.common.white},sectionColumnRight:{width:"50%",float:"right",margin:e.spacing(3,2),backgroundColor:"lightGray"},section1:{margin:e.spacing(2,2)},section3:{margin:e.spacing(3,1,1)}}}));function G(e){var t=V();function a(t){e.removeEntry(e.user,t)}function n(t,a){var n=Number(a);isNaN(n)||e.modifyEntry(e.user,t,n)}return Object(v.jsxs)("div",{className:t.root,children:[Object(v.jsx)("div",{className:t.section1,children:Object(v.jsxs)(I.a,{color:"textSecondary",variant:"body2",children:["Entry overview for ",e.user.name,":"]})}),Object(v.jsx)("div",{className:"AreaInputNew",children:Object(v.jsxs)("div",{className:"UserEntriesContainer",children:[Object(v.jsx)(H,{addEntry:function(){e.addEntry(e.user)},activeDate:e.activeDate,processDateChange:function(t){e.modifyDate(e.user,t)}}),0===e.userEntries.length&&Object(v.jsx)("div",{className:"DataEntryStyle",children:Object(v.jsxs)(I.a,{color:"primary",variant:"body2",children:["No entries yet for ",e.user.name," on ",e.activeDate]})}),e.userEntries.map((function(t,r){return Object(v.jsx)(R,{name:e.user.name,confirmInput:n,removeEntry:a,distance:t,index:r})}))]})})]})}var J=new D,M="",P=(new Date).toISOString().substring(0,10);var z=function(){var e=Object(n.useState)([0]),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([""]),i=Object(c.a)(s,2),o=i[0],u=i[1],l=Object(n.useState)(""),d=Object(c.a)(l,2),h=d[0],b=d[1],g=Object(n.useState)([]),m=Object(c.a)(g,2),O=m[0],p=m[1],x=Object(n.useState)((new Date).toISOString().substring(0,10)),y=Object(c.a)(x,2),D=y[0],k=y[1],w=Object(n.useState)(!1),N=Object(c.a)(w,2),E=N[0],C=N[1];return E||(J.init((function(){var e=J.databaseCache.getUser(M);null!==e&&p(e.getDistancesOnDate(P));for(var t=new f,a=0;a<J.databaseCache.users.length;a++)for(var n=J.databaseCache.users[a],s=0;s<n.userDates.length;s++)for(var i=n.userDates[s],c=i.date,o=i.values,l=0;l<o.length;l++)t.addDataEntry(o[l],c);for(var d=t.getDates(),h=[],v=0;v<d.length;v++)h[v]=t.getAdditionOnDate(d[v]);for(var b=0;b<d.length;b++)d[b]=t.getDateLabel(d[b]);r(h),u(d)})),C(!0)),Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"UserContainer",children:[Object(v.jsx)("div",{className:"PersonEntry",children:E&&Object(v.jsx)(U,{items:J.databaseCache.getUserNames(),processUserSelect:function(e){M=e,b(e);var t=J.databaseCache.getUser(M);null!==t&&p(t.getDistancesOnDate(P))}})}),h.length>0&&Object(v.jsx)("div",{children:Object(v.jsx)(G,{user:J.databaseCache.getUser(h),userEntries:O,activeDate:D,removeEntry:function(e,t){J.remove(e.name,P,t)},addEntry:function(e){J.add(e.name,P,0)},modifyEntry:function(e,t,a){J.edit(e.name,P,t,a)},modifyDate:function(e,t){P=t,k(t),J.update()}})})]}),Object(v.jsx)("div",{className:"GraphContainer",children:Object(v.jsx)(j,{data:a,dates:o})})]})};i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root"))}},[[217,1,2]]]);
//# sourceMappingURL=main.ec466f6a.chunk.js.map